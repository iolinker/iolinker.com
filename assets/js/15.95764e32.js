(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{562:function(t,e,a){t.exports=a.p+"assets/img/weixin_work_credential.e7c4dead.png"},563:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_corpid.f8ac12e4.png"},564:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_create.d4d968a7.png"},565:function(t,e,a){t.exports=a.p+"assets/img/wxwork_create_app.e2a6c225.png"},566:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_detail.061d32e6.png"},567:function(t,e,a){t.exports=a.p+"assets/img/wxwork_corpsecret.5e4879bd.png"},568:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_corpsecret-2.bff4bac6.png"},569:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_agentid.ac2347f6.png"},570:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_callback_1.e435b1ad.png"},571:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_callback_2.c7f57339.png"},572:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_enable_cred.cb8918be.png"},573:function(t,e,a){t.exports=a.p+"assets/img/wxwork_app_callback_3.d250e4cb.png"},574:function(t,e,a){t.exports=a.p+"assets/img/wxwork_callback.6e5771da.png"},788:function(t,e,a){"use strict";a.r(e);var r=a(27),s=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"企业微信应用凭据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#企业微信应用凭据"}},[t._v("#")]),t._v(" 企业微信应用凭据")]),t._v(" "),e("p",[t._v("该凭据需要以下5个信息，这些信息需要登陆企业微信后台后才可以获得。")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(562),alt:"image-20240922084402950"}}),t._v(" "),e("h2",{attrs:{id:"corpid-企业id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#corpid-企业id"}},[t._v("#")]),t._v(" CorpID（企业ID）")]),t._v(" "),e("p",[t._v("位置：【我的企业】=》【企业信息】")]),t._v(" "),e("p",[t._v("链接："),e("a",{attrs:{href:"https://work.weixin.qq.com/wework_admin/frame#profile",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://work.weixin.qq.com/wework_admin/frame#profile"),e("OutboundLink")],1)]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(563),alt:"image-20240922084919865"}}),t._v(" "),e("h2",{attrs:{id:"corpsecret"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#corpsecret"}},[t._v("#")]),t._v(" CorpSecret")]),t._v(" "),e("p",[t._v("位置：【应用管理】=>【应用】=>【自建】")]),t._v(" "),e("p",[t._v("链接："),e("a",{attrs:{href:"https://work.weixin.qq.com/wework_admin/frame#apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://work.weixin.qq.com/wework_admin/frame#apps"),e("OutboundLink")],1)]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(564),alt:"image-20240922085925898"}}),t._v(" "),e("h3",{attrs:{id:"自建应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自建应用"}},[t._v("#")]),t._v(" 自建应用")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(565),alt:"image-20240922085212639"}}),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(566),alt:"image-20240922085352560"}}),t._v(" "),e("h3",{attrs:{id:"获取corpsecret"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取corpsecret"}},[t._v("#")]),t._v(" 获取CorpSecret")]),t._v(" "),e("p",[t._v("点击Secret右边的【查看】按钮，可以在企业微信客户端应用上接收到我们需要的CorpSecret信息。")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:a(567),alt:"image-20240922085606888"}}),t._v(" "),e("p",[t._v("打开客户端软件，如下可以看到一条消息，点击【前往查看】按钮即可以看到CorpSecret。")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(568),alt:"image-20240922090147473"}}),t._v(" "),e("h2",{attrs:{id:"agentid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#agentid"}},[t._v("#")]),t._v(" AgentId")]),t._v(" "),e("p",[t._v("位置：【应用管理】=>【应用】=>【自建】")]),t._v(" "),e("p",[t._v("链接："),e("a",{attrs:{href:"https://work.weixin.qq.com/wework_admin/frame#apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://work.weixin.qq.com/wework_admin/frame#apps"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("如上，打开自建应用后，就可以看到AgentId。")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(569),alt:"image-20240922090606587"}}),t._v(" "),e("h2",{attrs:{id:"token和encodingaeskey"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#token和encodingaeskey"}},[t._v("#")]),t._v(" Token和EncodingAESKey")]),t._v(" "),e("p",[t._v("位置：打开自建应用，进入功能选项下的【接受消息】，点击【设置API接收】按钮。")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(570),alt:"image-20240922090729328"}}),t._v(" "),e("p",[t._v("其中Token和EncodingAESKey是可以在企微平台上自动生成的。其中接收的消息类型选择如下，注意要勾选微信客服消息和事件。")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(571),alt:"image-20240922152040355"}}),t._v(" "),e("h3",{attrs:{id:"测试回调接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试回调接口"}},[t._v("#")]),t._v(" 测试回调接口")]),t._v(" "),e("p",[t._v("前面我们创建保存凭据后，默认是未启用的。进入【凭据管理】，把前面创建的企微应用凭据启用。")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(572),alt:"image-20240922113129276"}}),t._v(" "),e("p",[t._v("回调企业微信的自建应用的【接受消息服务器配置】，我们把前面生成的回调接口地址（"),e("code",[t._v("http://xxx.com/v1/weixin_work/callback/[corpId]/[agentId]")]),t._v("）输入进去。")]),t._v(" "),e("p",[t._v("点击保存后，如果接口一切正常，会提示保存成功，说明企微推送给BotMan系统的回调接口的数据解密成功，整个流程跑通了。")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:a(573),alt:"image-20240922152355753"}}),t._v(" "),e("p",[t._v("如果想了解企微跟开发者服务器的交互过程，可以参考企微的官方文档："),e("a",{attrs:{href:"https://developer.work.weixin.qq.com/document/path/90930",target:"_blank",rel:"noopener noreferrer"}},[t._v("回调配置"),e("OutboundLink")],1)]),t._v(" "),e("img",{attrs:{src:a(574),alt:"img"}})])}),[],!1,null,null,null);e.default=s.exports}}]);